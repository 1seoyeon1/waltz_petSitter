
/* Drop Tables */

DROP TABLE blogLike CASCADE CONSTRAINTS;
DROP TABLE blogReply CASCADE CONSTRAINTS;
DROP TABLE blog CASCADE CONSTRAINTS;
DROP TABLE petInfo CASCADE CONSTRAINTS;
DROP TABLE qnaReply CASCADE CONSTRAINTS;
DROP TABLE qna CASCADE CONSTRAINTS;
DROP TABLE reviewBoard CASCADE CONSTRAINTS;
DROP TABLE reserve CASCADE CONSTRAINTS;
DROP TABLE sitterBoard CASCADE CONSTRAINTS;
DROP TABLE sitterMember CASCADE CONSTRAINTS;
DROP TABLE userMember CASCADE CONSTRAINTS;



/* Drop Sequences */

DROP SEQUENCE SEQ_blog_REPLY;
DROP SEQUENCE SEQ_BLOG_BNO;
DROP SEQUENCE SEQ_petInfo_PNO;
DROP SEQUENCE SEQ_qnaReply_RNO;
DROP SEQUENCE SEQ_qna_QNO;
DROP SEQUENCE SEQ_rqno;
DROP SEQUENCE SEQ_reviewBoard_RNO;


/* Create Sequences */

CREATE SEQUENCE SEQ_blog_REPLY INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_BLOG_BNO INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_petInfo_PNO INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_qnaReply_RNO INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_qna_QNO INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_rqno INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_reviewBoard_RNO INCREMENT BY 1 START WITH 1;


/* Create Tables */

CREATE TABLE blog
(
   BLOG_BNO number NOT NULL,
   BLOG_DATE date,
   BLOG_TITLE varchar2(200),
   BLOG_CONTENT varchar2(3000),
   BLOG_IMAGE varchar2(50),
   BLOG_EMAIL varchar2(30),
   BLOG_CATEGORY varchar2(30),
   PRIMARY KEY (BLOG_BNO)
);


CREATE TABLE blogLike
(
   LIKEBLOG_BNO number,
   MLIKEBLOG_EMAIL varchar2(30),
   SLIKEBLOG_EMAIL varchar2(30),
   LIKEBLOG_STATUS number,
   LIKEBLOG_REGDATE date
);


CREATE TABLE blogReply
(
   REPLY_NO number NOT NULL,
   BLOG_NO number,
   REPLY_CONTENT varchar2(1000),
   REPLY_WRITER varchar2(50),
   REPLY_DATE date,
   PRIMARY KEY (REPLY_NO)
);


CREATE TABLE petInfo
(
   PNO number NOT NULL,
   USER_EMAIL varchar2(30) NOT NULL,
   PET_TYPE varchar2(30),
   PET_AGE number,
   PET_GENDER varchar2(6),
   PET_DETAIL varchar2(1000),
   PET_NAME varchar2(50),
   PET_IMAGE varchar2(100),
   PRIMARY KEY (PNO)
);


CREATE TABLE qna
(
   QNO number NOT NULL,
   USER_EMAIL varchar2(30) NOT NULL,
   QNA_TITLE varchar2(100),
   QNA_CATEGORY varchar2(50),
   QNA_CONTENT varchar2(3000),
   QNA_DATE date DEFAULT SYSDATE,
   PRIMARY KEY (QNO)
);


CREATE TABLE qnaReply
(
   QNA_RNO number NOT NULL,
   QNO number NOT NULL,
   SITTER_EMAIL varchar2(30) NOT NULL,
   QNA_REPLY_CONTENT varchar2(3000) NOT NULL,
   QNA_REPLY_DATE date DEFAULT SYSDATE,
   PRIMARY KEY (QNA_RNO)
);


CREATE TABLE reserve
(
   RENO number NOT NULL,
   SITTER_EMAIL varchar2(30) NOT NULL,
   USER_EMAIL varchar2(30) NOT NULL,
   SUBJECT varchar2(50),
   RQ_DATE date DEFAULT SYSDATE,
   START_DATE date NOT NULL,
   END_DATE date NOT NULL,
   ST_TIME varchar2(30),
   ED_TIME varchar2(30),
   ALL_DAY number(2,0) DEFAULT 0,
   MEMO varchar2(1000),
   CHK number(2,0) DEFAULT 0,
   RD number(2,0) DEFAULT 0,
   RV number(2,0) DEFAULT 0,
   PRIMARY KEY (RENO)
);


CREATE TABLE reviewBoard
(
   RNO number NOT NULL,
   R_RATE number,
   R_TITLE varchar2(30),
   RWRITE_DATE date DEFAULT SYSDATE,
   RUSE_DATE varchar2(40),
   R_CONTENT varchar2(3000),
   R_IMAGE varchar2(250),
   RENO number NOT NULL,
   SITTER_EMAIL varchar2(30) NOT NULL,
   USER_EMAIL varchar2(30) NOT NULL,
   PRIMARY KEY (RNO)
);


CREATE TABLE sitterBoard
(
   SITTER_EMAIL varchar2(30) NOT NULL,
   SITTER_EXP varchar2(1000),
   SITTER_INTRO varchar2(4000),
   SITTER_PRICE number,
   SITTER_IMAGE varchar2(50),
   SITTER_ADDR varchar2(50)
);


CREATE TABLE sitterMember
(
   SITTER_EMAIL varchar2(30) NOT NULL,
   SITTER_NAME varchar2(20) NOT NULL,
   SITTER_PASSWORD varchar2(30) NOT NULL,
   SITTER_PHONE varchar2(20) NOT NULL,
   SITTER_GENDER varchar2(6) NOT NULL,
   PRIMARY KEY (SITTER_EMAIL)
);


CREATE TABLE userMember
(
   USER_EMAIL varchar2(30) NOT NULL,
   USER_PASSWORD varchar2(20) NOT NULL,
   USER_NAME varchar2(20) NOT NULL,
   USER_PHONE varchar2(20) NOT NULL,
   USER_GENDER varchar2(6) NOT NULL,
   PRIMARY KEY (USER_EMAIL)
);


/* Create Foreign Keys */

ALTER TABLE blogLike
   ADD FOREIGN KEY (LIKEBLOG_BNO)
   REFERENCES blog (BLOG_BNO)
;


ALTER TABLE blogReply
   ADD FOREIGN KEY (BLOG_NO)
   REFERENCES blog (BLOG_BNO)
;


ALTER TABLE qnaReply
   ADD FOREIGN KEY (QNO)
   REFERENCES qna (QNO)
;


ALTER TABLE reviewBoard
   ADD FOREIGN KEY (RENO)
   REFERENCES reserve (RENO)
;


ALTER TABLE blogLike
   ADD FOREIGN KEY (SLIKEBLOG_EMAIL)
   REFERENCES sitterMember (SITTER_EMAIL)
;


ALTER TABLE qnaReply
   ADD FOREIGN KEY (SITTER_EMAIL)
   REFERENCES sitterMember (SITTER_EMAIL)
;


ALTER TABLE reserve
   ADD FOREIGN KEY (SITTER_EMAIL)
   REFERENCES sitterMember (SITTER_EMAIL)
;


ALTER TABLE reviewBoard
   ADD FOREIGN KEY (SITTER_EMAIL)
   REFERENCES sitterMember (SITTER_EMAIL)
;


ALTER TABLE sitterBoard
   ADD FOREIGN KEY (SITTER_EMAIL)
   REFERENCES sitterMember (SITTER_EMAIL)
;


ALTER TABLE blogLike
   ADD FOREIGN KEY (MLIKEBLOG_EMAIL)
   REFERENCES userMember (USER_EMAIL)
;


ALTER TABLE petInfo
   ADD FOREIGN KEY (USER_EMAIL)
   REFERENCES userMember (USER_EMAIL)
;


ALTER TABLE qna
   ADD FOREIGN KEY (USER_EMAIL)
   REFERENCES userMember (USER_EMAIL)
;


ALTER TABLE reserve
   ADD FOREIGN KEY (USER_EMAIL)
   REFERENCES userMember (USER_EMAIL)
;


ALTER TABLE reviewBoard
   ADD FOREIGN KEY (USER_EMAIL)
   REFERENCES userMember (USER_EMAIL)
;



/* Set Delete cascade */

ALTER TABLE petInfo ADD CONSTRAINT PK_USERMEMBER_ID FOREIGNKEY(USER_EMAIL)
REFERENCES userMember(USER_EMAIL) ON DELETE CASCADE;
ALTER TABLE blogLike ADD CONSTRAINT PK_MBLOGLIKE_ID FOREIGNKEY(MLIKEBLOG_EMAIL)
REFERENCES userMember(USER_EMAIL) ON DELETE CASCADE;

ALTER TABLE sitterBoard ADD CONSTRAINT PK_SITTERBOARD_ID FOREIGNKEY(SITTER_EMAIL)
REFERENCES sitterMember(SITTER_EMAIL) ON DELETE CASCADE;
ALTER TABLE reviewBoard ADD CONSTRAINT PK_REVIEWBOARD_ID FOREIGN KEY(SITTER_EMAIL)
REFERENCES sitterMember(SITTER_EMAIL) ON DELETE CASCADE;
ALTER TABLE blogLike ADD CONSTRAINT PK_SBLOGLIKE_ID FOREIGNKEY(SLIKEBLOG_EMAIL)
REFERENCES sitterMember(SITTER_EMAIL) ON DELETE CASCADE;